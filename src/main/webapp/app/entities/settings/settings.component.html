<div class="modal-header">
    <h4 class="modal-title" jhitranslate="login.title" ng-reflect-jhi-translate="login.title">
        <span>Settings</span>
    </h4>
    <button aria-label="Close" class="close" data-dismiss="modal" type="button" (click)="modalDismiss()">
        <span aria-hidden="true">x</span>
    </button>
</div>
<div class="modal-body" (load)="loaded()">
    <div class="row justify-content-center">
        <div class="col-md-8"> <!--bindings={}--></div>
        <div class="col-md-8">
            <form class="form ng-pristine ng-valid ng-touched" novalidate="" role="form">
                <div class="form-group">
                    <div class="tab">
                        <button class="tablinks {{cssActiveG}}" (click)="changeTab('general')">General</button>
                        <button class="tablinks {{cssActiveP}}" (click)="changeTab('personal')">Personal Data</button>
                        <button class="tablinks {{cssActiveS}}" (click)="changeTab('security')">Security</button>
                    </div>
                    <div class="tabcontent" [hidden]="!isGeneral">
                        <div>
                            <div class="row justify-content-center">
                                <div class="col-md-8">
                                    <div class="alert alert-danger" *ngIf="errorEmailExists">
                                        <strong>Email is already in use!</strong> Please choose another one.
                                    </div>

                                    <div class="alert alert-danger" *ngIf="doNotMatch">
                                        The password and its confirmation do not match!
                                    </div>

                                    <div class="alert alert-danger" *ngIf="oldNotMath">
                                        <strong>The existing password is wrong!</strong>
                                        <strong>Please retype the existing password!</strong>
                                    </div>
                                </div>
                            </div>
                            <div class="row justify-content-center">
                                <div class="col-md-8" style="margin-top: 5%;margin-bottom: 10%;" *ngIf="isVisible">
                                    <form name="form" role="form" (ngSubmit)="register()" #registerForm="ngForm" *ngIf="!success">
                                        <div class="form-group">
                                            <div class="form-group">
                                                <label>Language: </label>
                                                <select style="height: 2%;" class="form-control" (change)="changeLanguage($event.target.value)">
                                                    <option *ngFor="let language of languages" value={{language}}
                                                            [selected]="language.languageCode == settings.language">
                                                        {{language.languageName}}
                                                    </option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Font: </label>
                                                <select style="height: 2%;" class="form-control" (change)="changeFont($event.target.value)">
                                                    <option *ngFor="let font of fonts" value={{font}}
                                                            [selected]="font.fontCode == settings.fontType">
                                                        {{font.fontName}}
                                                    </option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Theme: </label>
                                                <select style="height: 2%;" class="form-control" (change)="changeTheme($event.target.value)">
                                                    <option *ngFor="let theme of themes" value={{theme}}
                                                            [selected]="theme.themeCode == settings.theme">
                                                        {{theme.themeName}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tabcontent" [hidden]="!isPersonal">
                        <div>
                            <div class="row justify-content-center">
                                <div class="col-md-8">
                                    <div class="alert alert-danger" *ngIf="errorEmailExists">
                                        <strong>Email is already in use!</strong> Please choose another one.
                                    </div>

                                    <div class="alert alert-danger" *ngIf="doNotMatch">
                                        The password and its confirmation do not match!
                                    </div>

                                    <div class="alert alert-danger" *ngIf="oldNotMath">
                                        <strong>The existing password is wrong!</strong>
                                        <strong>Please retype the existing password!</strong>
                                    </div>
                                </div>
                            </div>
                            <div class="row justify-content-center">
                                <div class="col-md-12" style="margin-top: 5%;margin-bottom: 10%;" *ngIf="isVisible">
                                    <form name="form" role="form" (ngSubmit)="register()" #registerForm="ngForm" *ngIf="!success">
                                        <div class="form-group">
                                            <label style="float:left; width: 20%" class="form-control-label" for="firstName" jhiTranslate="settings.form.firstname">First Name</label>
                                            <input type="text" class="form-control" [(ngModel)]="account.firstName" id="firstName"
                                                   name="firstName" #firstName="ngModel" placeholder="First Name"
                                                   required minlength="1" maxlength="128"
                                                   style="width: 80%">
                                            <div *ngIf="firstName.dirty && firstName.invalid">
                                                <small class="form-text text-danger">
                                                    First Name is required.
                                                </small>
                                                <small class="form-text text-danger">
                                                    First Name is required to be at least 1 character.
                                                </small>
                                                <small class="form-text text-danger">
                                                    First Name cannot be longer than 50 characters.
                                                </small>
                                                <small class="form-text text-danger">
                                                    First Name can only contain letters and digits.
                                                </small>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label style="float:left; width: 20%" class="form-control-label" for="lastName" jhiTranslate="settings.form.lastname">Last Name</label>
                                            <input style="width: 80%" type="text" class="form-control" [(ngModel)]="account.lastName" id="lastName"
                                                   name="lastName" #lastName="ngModel" placeholder="Last Name"
                                                   required minlength="1" maxlength="128">
                                            <div *ngIf="lastName.dirty && lastName.invalid">
                                                <small class="form-text text-danger">
                                                    Last Name is required.
                                                </small>
                                                <small class="form-text text-danger">
                                                    Last Name is required to be at least 1 character.
                                                </small>
                                                <small class="form-text text-danger">
                                                    Last Name cannot be longer than 50 characters.
                                                </small>
                                                <small class="form-text text-danger">
                                                    Last Name can only contain letters and digits.
                                                </small>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label style="float:left; width: 20%" class="form-control-label" for="email" jhiTranslate="global.form.email">Email</label>
                                            <input style="width: 80%" type="email" class="form-control" id="email" name="email" #email="ngModel"
                                                   placeholder="Email"
                                                   [(ngModel)]="account.email" minlength=5 maxlength=254 email required>
                                            <div *ngIf="email.dirty && email.invalid">
                                                <small class="form-text text-danger" *ngIf="email.errors.required">
                                                    Your email is required.
                                                </small>
                                                <small class="form-text text-danger" *ngIf="email.errors.invalid">
                                                    Your email is invalid.
                                                </small>
                                                <small class="form-text text-danger" *ngIf="email.errors.minlength">
                                                    Your email is required to be at least 5 characters.
                                                </small>
                                                <small class="form-text text-danger" *ngIf="email.errors.maxlength">
                                                    Your email cannot be longer than 100 characters.
                                                </small>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label style="float:left; width: 35%" class="form-control-label"></label>
                                            <div class="col-md-4 avatarWrapper" style="float: left" for="uploadPhoto">
                                            <form>
                                                <label for="uploadPhoto">
                                                    <div class="avatar cursor-pointer" (mouseenter)="displayGlyph = false"
                                                         (mouseleave)="displayGlyph = true" style="">
                                                        <div class="uploadOverlay">
                                                            <i id="uploadGlyph" class="glyphicon glyphicon-cloud-upload cloud-glyphicon"
                                                               style="background-color: rgba(173, 216, 230, 0.5);border-radius: 100%;height: 115px;
                                        margin: 0;padding: 25px;width: 115px;
                                    " [hidden]="displayGlyph"></i>
                                                        </div>
                                                        <img class="avatar-image" [hidden]="imageUploaded"
                                                             src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/20625/avatar-bg.png">
                                                        <img class="avatar-image" [src]="imageURL" [hidden]="!imageUploaded"> <br/>
                                                    </div>
                                                </label>
                                            </form>
                                            <input type="file" id="uploadPhoto" hidden accept="image/*"
                                                   (change)="handleFileInput($event)">

                                            </div></div>
                                    </form>
                                </div>
                                <div class="col-md-8" style="margin-top: 5%" *ngIf="!isVisible">
                                    <div class="col-md-8" id="RegisterSuccess">
                                        <strong> Register Success !!</strong>
                                        <div class="btn-wrapper">
                                            <label for="goToLogin" (click)="navigateLogin()" class="cloud-btn">Go to login..</label>
                                            <input type="button" id="goToLogin" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tabcontent" [hidden]="!isSecurity">
                        <div>
                            <div class="row justify-content-center">
                                <div class="col-md-8">
                                    <div class="alert alert-danger" *ngIf="errorEmailExists">
                                        <strong>Email is already in use!</strong> Please choose another one.
                                    </div>

                                    <div class="alert alert-danger" *ngIf="doNotMatch">
                                        The password and its confirmation do not match!
                                    </div>

                                    <div class="alert alert-danger" *ngIf="oldNotMath">
                                        <strong>The existing password is wrong!</strong>
                                        <strong>Please retype the existing password!</strong>
                                    </div>
                                </div>
                            </div>
                            <div class="row justify-content-center">
                                <div class="col-md-8" style="margin-top: 5%;margin-bottom: 10%;" *ngIf="isVisible">
                                    <form name="form" role="form" (ngSubmit)="register()" #registerForm="ngForm" *ngIf="!success">
                                        <div class="form-group">
                                            <label class="form-control-label">Change Password</label>
                                            <input type="password" class="form-control" id="oldpassword" name="oldpassword" #oldpassword="ngModel"
                                                   placeholder="Old Password"
                                                   [(ngModel)]="account.oldpassword" minlength=8 maxlength=128 required>
                                            <div *ngIf="oldpassword.dirty && oldpassword.invalid">
                                                <small class="form-text text-danger" *ngIf="oldpassword.errors.required">
                                                    Your password is required.
                                                </small>
                                                <small class="form-text text-danger" *ngIf="oldpassword.errors.minlength">
                                                    Your password is required to be at least 8 characters.
                                                </small>
                                                <small class="form-text text-danger" *ngIf="oldpassword.errors.maxlength">
                                                    Your password cannot be longer than 128 characters.
                                                </small>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <input type="password" class="form-control" id="newpassword" name="newpassword" #newpassword="ngModel"
                                                   placeholder="New Password"
                                                   [(ngModel)]="account.password" minlength=8 maxlength=128 required>
                                            <div *ngIf="newpassword.dirty && newpassword.invalid">
                                                <small class="form-text text-danger" *ngIf="newpassword.errors.required">
                                                    Your password is required.
                                                </small>
                                                <small class="form-text text-danger" *ngIf="newpassword.errors.minlength">
                                                    Your password is required to be at least 8 characters.
                                                </small>
                                                <small class="form-text text-danger" *ngIf="newpassword.errors.maxlength">
                                                    Your password cannot be longer than 128 characters.
                                                </small>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
                                                   #confirmPasswordInput="ngModel" placeholder="New Password Confirmation"
                                                   [(ngModel)]="confirmPassword" minlength=8 maxlength=128 required>
                                            <div *ngIf="confirmPasswordInput.dirty && confirmPasswordInput.invalid">
                                                <small class="form-text text-danger" *ngIf="confirmPasswordInput.errors.required">
                                                    Your confirmation password is required.
                                                </small>
                                                <small class="form-text text-danger" *ngIf="confirmPasswordInput.errors.minlength">
                                                    Your confirmation password is required to be at least 8 characters.
                                                </small>
                                                <small class="form-text text-danger" *ngIf="confirmPasswordInput.errors.maxlength">
                                                    Your confirmation password cannot be longer than 128 characters.
                                                </small>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" jhitranslate="login.form.button" (click)="saveSettings()" style="float: right"
                        ng-reflect-jhi-translate="login.form.button"><span>Save</span>
                </button>
            </form>
        </div>
    </div>
</div>
